!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:beacons-sentry-app-key":!0})}catch(e){}}();try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2785d46b-d24e-41c2-9be2-ede1a0a4b403",e._sentryDebugIdIdentifier="sentry-dbid-2785d46b-d24e-41c2-9be2-ede1a0a4b403")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7686],{1557:function(e,t,n){n.d(t,{l:function(){return r}});var r=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==n.g?n.g:void 0}},57686:function(e,t,n){n.r(t),n.d(t,{SafeLoggerProvider:function(){return X},evaluateTargetingAndCapture:function(){return t$},flush:function(){return tV},getSessionId:function(){return tH},getSessionReplayProperties:function(){return tQ},init:function(){return tz},setSessionId:function(){return tX},shutdown:function(){return tZ}}),(r=i||(i={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Verbose=3]="Verbose",r[r.Debug=4]="Debug";var r,i,o,s,a,c,u,l,d,f,h,v,g,p,m,y,b,S,w,I,C,E,P,k,R,T,_=function(e,t,n,r,o){return void 0===o&&(o=null),function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var c=n(),u=c.logger,l=c.logLevel;if(l&&l<i.Debug||!l||!u)return e.apply(o,s);var d={type:"invoke public method",name:t,args:s,stacktrace:(Error().stack||"").split("\n").slice(3).map(function(e){return e.trim()}),time:{start:new Date().toISOString()},states:{}};r&&d.states&&(d.states.before=r());var f=e.apply(o,s);return f&&f.promise?f.promise.then(function(){r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),u.debug(JSON.stringify(d,null,2))}):(r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),u.debug(JSON.stringify(d,null,2))),f}},x=n(47750),O="Amplitude Logger ",M=function(){function e(){this.logLevel=i.None}return e.prototype.disable=function(){this.logLevel=i.None},e.prototype.enable=function(e){void 0===e&&(e=i.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<i.Verbose||console.log("".concat(O,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<i.Warn||console.warn("".concat(O,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<i.Error||console.error("".concat(O,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<i.Debug||console.log("".concat(O,"[Debug]: ").concat(e.join(" ")))},e}();(v=o||(o={})).Unknown="unknown",v.Skipped="skipped",v.Success="success",v.RateLimit="rate_limit",v.PayloadTooLarge="payload_too_large",v.Invalid="invalid",v.Failed="failed",v.Timeout="Timeout",v.SystemError="SystemError";var D=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){if("object"!=typeof e)return null;var t,n,r,i,s,a,c,u,l,d,f,h,v,g,p,m,y,b,S,w,I,C,E=e.code||0,P=this.buildStatus(E);switch(P){case o.Success:return{status:P,statusCode:E,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(n=e.payload_size_bytes)&&void 0!==n?n:0,serverUploadTime:null!==(r=e.server_upload_time)&&void 0!==r?r:0}};case o.Invalid:return{status:P,statusCode:E,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(s=e.missing_field)&&void 0!==s?s:"",eventsWithInvalidFields:null!==(a=e.events_with_invalid_fields)&&void 0!==a?a:{},eventsWithMissingFields:null!==(c=e.events_with_missing_fields)&&void 0!==c?c:{},eventsWithInvalidIdLengths:null!==(u=e.events_with_invalid_id_lengths)&&void 0!==u?u:{},epsThreshold:null!==(l=e.eps_threshold)&&void 0!==l?l:0,exceededDailyQuotaDevices:null!==(d=e.exceeded_daily_quota_devices)&&void 0!==d?d:{},silencedDevices:null!==(f=e.silenced_devices)&&void 0!==f?f:[],silencedEvents:null!==(h=e.silenced_events)&&void 0!==h?h:[],throttledDevices:null!==(v=e.throttled_devices)&&void 0!==v?v:{},throttledEvents:null!==(g=e.throttled_events)&&void 0!==g?g:[]}};case o.PayloadTooLarge:return{status:P,statusCode:E,body:{error:null!==(p=e.error)&&void 0!==p?p:""}};case o.RateLimit:return{status:P,statusCode:E,body:{error:null!==(m=e.error)&&void 0!==m?m:"",epsThreshold:null!==(y=e.eps_threshold)&&void 0!==y?y:0,throttledDevices:null!==(b=e.throttled_devices)&&void 0!==b?b:{},throttledUsers:null!==(S=e.throttled_users)&&void 0!==S?S:{},exceededDailyQuotaDevices:null!==(w=e.exceeded_daily_quota_devices)&&void 0!==w?w:{},exceededDailyQuotaUsers:null!==(I=e.exceeded_daily_quota_users)&&void 0!==I?I:{},throttledEvents:null!==(C=e.throttled_events)&&void 0!==C?C:[]}};case o.Timeout:default:return{status:P,statusCode:E}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?o.Success:429===e?o.RateLimit:413===e?o.PayloadTooLarge:408===e?o.Timeout:e>=400&&e<500?o.Invalid:e>=500?o.Failed:o.Unknown},e}(),L=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.customHeaders=t,n}return(0,x.ZT)(t,e),t.prototype.send=function(e,t){return(0,x.mG)(this,void 0,void 0,function(){var n,r;return(0,x.Jh)(this,function(i){switch(i.label){case 0:if("undefined"==typeof fetch)throw Error("FetchTransport is not supported");return[4,fetch(e,{headers:(0,x.pi)({"Content-Type":"application/json",Accept:"*/*"},this.customHeaders),body:JSON.stringify(t),method:"POST"})];case 1:return[4,(n=i.sent()).text()];case 2:r=i.sent();try{return[2,this.buildResponse(JSON.parse(r))]}catch(e){return[2,this.buildResponse({code:n.status})]}return[2]}})})},t}(D),q="".concat("AMP","_unsent"),N="$default_instance",A="https://api2.amplitude.com/2/httpapi",F=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:N,logLevel:i.Warn,loggerProvider:new M,offline:!1,optOut:!1,serverUrl:A,serverZone:"US",useBatch:!1}},j=function(){function e(e){this._optOut=!1;var t,n,r,i,o=F();this.apiKey=e.apiKey,this.flushIntervalMillis=null!==(t=e.flushIntervalMillis)&&void 0!==t?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!==(n=e.logLevel)&&void 0!==n?n:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=void 0!==e.offline?e.offline:o.offline,this.optOut=null!==(r=e.optOut)&&void 0!==r?r:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(i=e.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=J(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),J=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=F().serverZone),void 0===n&&(n=F().useBatch),e)return{serverUrl:e,serverZone:void 0};var r,i=["US","EU"].includes(t)?t:F().serverZone;return{serverZone:i,serverUrl:(r=n,"EU"===i?r?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":r?"https://api2.amplitude.com/batch":A)}};(function(){this.sdk={metrics:{histogram:{}}}}).prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t},(g=s||(s={})).US="US",g.EU="EU",g.STAGING="STAGING";var G="[Amplitude]",U="".concat(G," Session Replay ID"),B=s.US,W={enabled:!0},K="".concat(G," Session Replay Debug"),z="amp-mask";(p=a||(a={})).GET_SR_PROPS="get-sr-props",p.DEBUG_INFO="debug-info",p.FETCH_REQUEST="fetch-request",p.METADATA="metadata",p.TARGETING_DECISION="targeting-decision";var X=function(){function e(e){this.logger=e,this.log=this.getSafeMethod("log"),this.warn=this.getSafeMethod("warn"),this.error=this.getSafeMethod("error"),this.debug=this.getSafeMethod("debug")}return e.prototype.getSafeMethod=function(e){if(!this.logger)return function(){};var t,n=this.logger[e];return"function"==typeof n?(null!==(t=n.__rrweb_original__)&&void 0!==t?t:n).bind(this.logger):function(){}},e.prototype.enable=function(e){this.logger.enable(e)},e.prototype.disable=function(){this.logger.disable()},e}(),H=n(1557),Q="medium",V=function(e,t,n){switch(t){case"light":if("input"!==e)return!0;var r,i=n?(r=n.type,n.hasAttribute("data-rr-is-password")?"password":r?r.toLowerCase():null):"";if(!i)return!1;if(["password","hidden","email","tel"].includes(i)||n.autocomplete.startsWith("cc-"))return!0;return!1;case"medium":case"conservative":return!0;default:return V(e,Q,n)}},Z=function(e,t,n){var r,i,o;if(void 0===t&&(t={defaultMaskLevel:Q}),n){if(n.closest("."+z)||(null!==(r=t.maskSelector)&&void 0!==r?r:[]).some(function(e){return n.closest(e)}))return!0;if(n.closest(".amp-unmask")||(null!==(i=t.unmaskSelector)&&void 0!==i?i:[]).some(function(e){return n.closest(e)}))return!1}return V(e,null!==(o=t.defaultMaskLevel)&&void 0!==o?o:Q,n)},$=function(e,t){return function(n,r){return Z(e,t,r)?n.replace(/[^\s]/g,"*"):n}},Y=function(){var e=(0,H.l)();return(null==e?void 0:e.location)?e.location.href:""},ee=function(e,t){return t||(e===s.STAGING?"https://api-sr.stag2.amplitude.com/sessions/v2/track":e===s.EU?"https://api-sr.eu.amplitude.com/sessions/v2/track":"https://api-sr.amplitude.com/sessions/v2/track")},et=function(e){var t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp("^".concat(t,"$"))},en=function(e){if(!e.every(function(e){return"string"==typeof e.selector&&"string"==typeof e.replacement}))throw Error("ugcFilterRules must be an array of objects with selector and replacement properties");if(!e.every(function(e){var t;return"string"==typeof(t=e.selector)&&""!==t.trim()&&!!/^\/|^https?:\/\/[^\s]+$/.test(t)}))throw Error("ugcFilterRules must be an array of objects with valid globs")},er=function(e,t){var n,r;try{for(var i=(0,x.XA)(t),o=i.next();!o.done;o=i.next()){var s=o.value,a=et(s.selector);if(a.test(e))return e.replace(a,s.replacement)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e},ei=function(){return(0,x.mG)(void 0,void 0,void 0,function(){var e,t,n,r;return(0,x.Jh)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!(e=(0,H.l)()))return[3,2];return[4,e.navigator.storage.estimate()];case 1:return n=(t=i.sent()).usage,r=t.quota,[2,{totalStorageSize:n?Math.round(n/1024):0,percentOfQuota:n&&r?Math.round((n/r+Number.EPSILON)*1e3)/1e3:0,usageDetails:JSON.stringify(t.usageDetails)}];case 2:return[3,4];case 3:return i.sent(),[3,4];case 4:return[2,{totalStorageSize:0,percentOfQuota:0,usageDetails:""}]}})})},eo=function(e){var t=(0,x.pi)({},e),n=t.apiKey;return t.apiKey="****".concat(n.substring(n.length-4)),t},es=function(){return{flushMaxRetries:2,logLevel:i.Warn,loggerProvider:new M,transportProvider:new L}},ea=function(e){function t(t,n){var r,i,o,s,a,c,u=this,l=es();return(u=e.call(this,(0,x.pi)((0,x.pi)({transportProvider:l.transportProvider,loggerProvider:new X(n.loggerProvider||l.loggerProvider)},n),{apiKey:t}))||this).flushMaxRetries=void 0!==n.flushMaxRetries&&n.flushMaxRetries<=l.flushMaxRetries?n.flushMaxRetries:l.flushMaxRetries,u.apiKey=t,u.sampleRate=n.sampleRate||0,u.serverZone=n.serverZone||B,u.configServerUrl=n.configServerUrl,u.trackServerUrl=n.trackServerUrl,u.shouldInlineStylesheet=n.shouldInlineStylesheet,u.version=n.version,u.performanceConfig=n.performanceConfig||W,u.storeType=null!==(r=n.storeType)&&void 0!==r?r:"idb",u.applyBackgroundColorToBlockedElements=null!==(i=n.applyBackgroundColorToBlockedElements)&&void 0!==i&&i,u.enableUrlChangePolling=null!==(o=n.enableUrlChangePolling)&&void 0!==o&&o,u.urlChangePollingInterval=null!==(s=n.urlChangePollingInterval)&&void 0!==s?s:1e3,u.captureDocumentTitle=null!==(a=n.captureDocumentTitle)&&void 0!==a&&a,n.privacyConfig&&(u.privacyConfig=n.privacyConfig),n.interactionConfig&&(u.interactionConfig=n.interactionConfig,u.interactionConfig.ugcFilterRules&&en(u.interactionConfig.ugcFilterRules)),n.debugMode&&(u.debugMode=n.debugMode),void 0!==n.useWebWorker?u.useWebWorker=n.useWebWorker:(null===(c=n.experimental)||void 0===c?void 0:c.useWebWorker)!==void 0&&(u.useWebWorker=n.experimental.useWebWorker),n.omitElementTags&&(u.omitElementTags=n.omitElementTags),u}return(0,x.ZT)(t,e),t}(j);(m=c||(c={})).SET="$set",m.SET_ONCE="$setOnce",m.ADD="$add",m.APPEND="$append",m.PREPEND="$prepend",m.REMOVE="$remove",m.PREINSERT="$preInsert",m.POSTINSERT="$postInsert",m.UNSET="$unset",m.CLEAR_ALL="$clearAll",(y=u||(u={})).IDENTIFY="$identify",y.GROUP_IDENTIFY="$groupidentify",y.REVENUE="revenue_amount";var ec=function(e){return{promise:e||Promise.resolve()}},eu=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t},el=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:ed(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),ed=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},ef=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},e}(),eh=function(){return(eh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ev(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eg(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}"function"==typeof SuppressedError&&SuppressedError;var ep=function(e,t){var n,r,i=typeof e;if(i!==typeof t)return!1;try{for(var o=ev(["string","number","boolean","undefined"]),s=o.next();!s.done;s=o.next())if(s.value===i)return e===t}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;var a=Array.isArray(e),c=Array.isArray(t);if(a!==c)return!1;if(a&&c){for(var u=0;u<e.length;u++)if(!ep(e[u],t[u]))return!1}else{if(!ep(Object.keys(e).sort(),Object.keys(t).sort()))return!1;var l=!0;return Object.keys(e).forEach(function(n){ep(e[n],t[n])||(l=!1)}),l}return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=Array(n);n--;)r[n]=[t[n],e[t[n]]];return r});var em=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=eh({},this.identity.userProperties),n=eh(eh({},this.identity),{userProperties:t});return{setUserId:function(e){return n.userId=e,this},setDeviceId:function(e){return n.deviceId=e,this},setUserProperties:function(e){return n.userProperties=e,this},setOptOut:function(e){return n.optOut=e,this},updateUserProperties:function(e){var t,r,i,o,s,a,c=n.userProperties||{};try{for(var u=ev(Object.entries(e)),l=u.next();!l.done;l=u.next()){var d=eg(l.value,2),f=d[0],h=d[1];switch(f){case"$set":try{for(var v=(i=void 0,ev(Object.entries(h))),g=v.next();!g.done;g=v.next()){var p=eg(g.value,2),m=p[0],y=p[1];c[m]=y}}catch(e){i={error:e}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}break;case"$unset":try{for(var b=(s=void 0,ev(Object.keys(h))),S=b.next();!S.done;S=b.next()){var m=S.value;delete c[m]}}catch(e){s={error:e}}finally{try{S&&!S.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}break;case"$clearAll":c={}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return n.userProperties=c,this},commit:function(){return e.setIdentity(n),this}}},e.prototype.getIdentity=function(){return eh({},this.identity)},e.prototype.setIdentity=function(e){var t=eh({},this.identity);this.identity=eh({},e),ep(t,this.identity)||this.listeners.forEach(function(t){t(e)})},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),ey="undefined"!=typeof globalThis?globalThis:void 0!==n.g?n.g:self,eb=function(){function e(){this.identityStore=new em,this.eventBridge=new ef,this.applicationContextProvider=new el}return e.getInstance=function(t){return ey.analyticsConnectorInstances||(ey.analyticsConnectorInstances={}),ey.analyticsConnectorInstances[t]||(ey.analyticsConnectorInstances[t]=new e),ey.analyticsConnectorInstances[t]},e}(),eS=((b=eS||{})[b.DomContentLoaded=0]="DomContentLoaded",b[b.Load=1]="Load",b[b.FullSnapshot=2]="FullSnapshot",b[b.IncrementalSnapshot=3]="IncrementalSnapshot",b[b.Meta=4]="Meta",b[b.Custom=5]="Custom",b[b.Plugin=6]="Plugin",b),ew=((S=ew||{})[S.Mutation=0]="Mutation",S[S.MouseMove=1]="MouseMove",S[S.MouseInteraction=2]="MouseInteraction",S[S.Scroll=3]="Scroll",S[S.ViewportResize=4]="ViewportResize",S[S.Input=5]="Input",S[S.TouchMove=6]="TouchMove",S[S.MediaInteraction=7]="MediaInteraction",S[S.StyleSheetRule=8]="StyleSheetRule",S[S.CanvasMutation=9]="CanvasMutation",S[S.Font=10]="Font",S[S.Log=11]="Log",S[S.Drag=12]="Drag",S[S.StyleDeclaration=13]="StyleDeclaration",S[S.Selection=14]="Selection",S[S.AdoptedStyleSheet=15]="AdoptedStyleSheet",S[S.CustomElement=16]="CustomElement",S),eI=((w=eI||{})[w.MouseUp=0]="MouseUp",w[w.MouseDown=1]="MouseDown",w[w.Click=2]="Click",w[w.ContextMenu=3]="ContextMenu",w[w.DblClick=4]="DblClick",w[w.Focus=5]="Focus",w[w.Blur=6]="Blur",w[w.TouchStart=7]="TouchStart",w[w.TouchMove_Departed=8]="TouchMove_Departed",w[w.TouchEnd=9]="TouchEnd",w[w.TouchCancel=10]="TouchCancel",w),eC=((I=eC||{})[I.Mouse=0]="Mouse",I[I.Pen=1]="Pen",I[I.Touch=2]="Touch",I),eE=((C=eE||{})[C["2D"]=0]="2D",C[C.WebGL=1]="WebGL",C[C.WebGL2=2]="WebGL2",C),eP=((E=eP||{})[E.Play=0]="Play",E[E.Pause=1]="Pause",E[E.Seeked=2]="Seeked",E[E.VolumeChange=3]="VolumeChange",E[E.RateChange=4]="RateChange",E),ek=((P=ek||{}).Start="start",P.Pause="pause",P.Resume="resume",P.Resize="resize",P.Finish="finish",P.FullsnapshotRebuilded="fullsnapshot-rebuilded",P.LoadStylesheetStart="load-stylesheet-start",P.LoadStylesheetEnd="load-stylesheet-end",P.SkipStart="skip-start",P.SkipEnd="skip-end",P.MouseInteraction="mouse-interaction",P.EventCast="event-cast",P.CustomEvent="custom-event",P.Flush="flush",P.StateChange="state-change",P.PlayBack="play-back",P.Destroy="destroy",P),eR=((k=eR||{})[k.Document=0]="Document",k[k.DocumentType=1]="DocumentType",k[k.Element=2]="Element",k[k.Text=3]="Text",k[k.CDATA=4]="CDATA",k[k.Comment=5]="Comment",k),eT=function(){function e(e,t){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=t}return e.prototype.fetchConfig=function(){var e=null,t={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(e){return this.logger.debug("Remote config localstorage failed to access: ",e),Promise.resolve(t)}if(null===e)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(t);try{var n=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(n))),Promise.resolve({remoteConfig:n.remoteConfig,lastFetch:new Date(n.lastFetch)})}catch(e){return this.logger.debug("Remote config localstorage failed to parse: ",e),localStorage.removeItem(this.key),Promise.resolve(t)}},e.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(e){this.logger.debug("Remote config localstorage failed to set: ",e)}return Promise.resolve(!1)},e}(),e_=(0,x.ev)([],(0,x.CR)(Array(256).keys()),!1).map(function(e){return e.toString(16).padStart(2,"0")}),ex=function(e){var t,n=(0,H.l)();if(!(null===(t=null==n?void 0:n.crypto)||void 0===t?void 0:t.getRandomValues))return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,ex);var r=n.crypto.getRandomValues(new Uint8Array(16));return r[6]=15&r[6]|64,r[8]=63&r[8]|128,(0,x.ev)([],(0,x.CR)(r.entries()),!1).map(function(e){var t=(0,x.CR)(e,2),n=t[0],r=t[1];return[4,6,8,10].includes(n)?"-".concat(e_[r]):e_[r]}).join("")},eO=function(){function e(e,t,n,r){void 0===n&&(n="US"),this.callbackInfos=[],this.lastSuccessfulFetch=null,this.fetchPromise=null,this.apiKey=e,this.serverUrl=r||("US"===n?"https://sr-client-cfg.amplitude.com/config":"https://sr-client-cfg.eu.amplitude.com/config"),this.logger=t,this.storage=new eT(e,t)}return e.prototype.subscribe=function(e,t,n){var r=ex(),i={id:r,key:e,deliveryMode:t,callback:n};return this.callbackInfos.push(i),"all"===t?this.subscribeAll(i):this.subscribeWaitForRemote(i,t.timeout),r},e.prototype.unsubscribe=function(e){var t=this.callbackInfos.findIndex(function(t){return t.id===e});return -1===t?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(t,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},e.prototype.updateConfigs=function(){return(0,x.mG)(this,void 0,void 0,function(){var e,t=this;return(0,x.Jh)(this,function(n){switch(n.label){case 0:if(this.lastSuccessfulFetch&&Date.now()-this.lastSuccessfulFetch<3e5)return this.logger.debug("Remote config client skipping updateConfigs: Too recent"),[2];return[4,this.getOrCreateFetchPromise()];case 1:return e=n.sent(),this.storage.setConfig(e),this.callbackInfos.forEach(function(n){t.sendCallback(n,e,"remote")}),[2]}})})},e.prototype.getOrCreateFetchPromise=function(){var e=this;return this.fetchPromise||(this.fetchPromise=this.fetch().then(function(t){return null!==t.remoteConfig&&(e.lastSuccessfulFetch=Date.now()),t}).finally(function(){e.fetchPromise=null})),this.fetchPromise},e.prototype.subscribeAll=function(e){return(0,x.mG)(this,void 0,void 0,function(){var t,n,r,i=this;return(0,x.Jh)(this,function(o){switch(o.label){case 0:return t=this.getOrCreateFetchPromise().then(function(t){i.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(t))),i.sendCallback(e,t,"remote"),i.storage.setConfig(t)}),n=this.storage.fetchConfig().then(function(e){return e}),[4,Promise.race([t,n])];case 1:return void 0!==(r=o.sent())&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(r))),null!==r.remoteConfig?this.sendCallback(e,r,"cache"):this.logger.debug("Remote config client skips sending callback because cache is empty (first time user).")),[4,t];case 2:return o.sent(),[2]}})})},e.prototype.subscribeWaitForRemote=function(e,t){return(0,x.mG)(this,void 0,void 0,function(){var n,r;return(0,x.Jh)(this,function(i){switch(i.label){case 0:n=new Promise(function(e,n){setTimeout(function(){n("Timeout exceeded")},t)}),i.label=1;case 1:return i.trys.push([1,3,,5]),[4,Promise.race([this.getOrCreateFetchPromise(),n])];case 2:return r=i.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,r,"remote"),this.storage.setConfig(r),[3,5];case 3:return i.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return null!==(r=i.sent()).remoteConfig?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,r,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,r,"remote")),[3,5];case 5:return[2]}})})},e.prototype.sendCallback=function(e,t,n){var r;e.lastCallback=new Date,r=e.key?e.key.split(".").reduce(function(e,t){return null===e?e:t in e?e[t]:null},t.remoteConfig):t.remoteConfig,e.callback(r,n,t.lastFetch)},e.prototype.fetch=function(e,t){return void 0===e&&(e=3),void 0===t&&(t=1e3),(0,x.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,c=this;return(0,x.Jh)(this,function(u){switch(u.label){case 0:n=t/e,r={remoteConfig:null,lastFetch:new Date},i=function(r){var i,s,a,u,l;return(0,x.Jh)(this,function(d){switch(d.label){case 0:i=new AbortController,s=setTimeout(function(){return i.abort()},t),d.label=1;case 1:return d.trys.push([1,7,8,9]),[4,fetch(o.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:i.signal})];case 2:if((a=d.sent()).ok)return[3,4];return[4,a.text()];case 3:return u=d.sent(),o.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(a.status,": ").concat(u)),[3,6];case 4:return[4,a.json()];case 5:return[2,{value:{remoteConfig:d.sent(),lastFetch:new Date}}];case 6:return[3,9];case 7:return(l=d.sent())instanceof Error&&"AbortError"===l.name?o.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(t,"ms")):o.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),l),[3,9];case 8:return clearTimeout(s),[7];case 9:if(!(r<e-1))return[3,11];return[4,new Promise(function(e){return setTimeout(e,c.getJitterDelay(n))})];case 10:d.sent(),d.label=11;case 11:return[2]}})},o=this,s=0,u.label=1;case 1:if(!(s<e))return[3,4];return[5,i(s)];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return s++,[3,1];case 4:return[2,r]}})})},e.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},e.prototype.getUrlParams=function(){var t=encodeURIComponent(this.apiKey),n=new URLSearchParams;return n.append("config_group",e.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(t,"?").concat(n.toString())},e.CONFIG_GROUP="browser",e}(),eM=function(e,t){var n=document.createDocumentFragment(),r=function(e){if(void 0===e&&(e=[]),"string"==typeof e&&(e=[e]),0!==(e=e.filter(function(e){try{n.querySelector(e)}catch(n){return t.warn('[session-replay-browser] omitting selector "'.concat(e,'" because it is invalid')),!1}return!0})).length)return e};return e.blockSelector=r(e.blockSelector),e.maskSelector=r(e.maskSelector),e.unmaskSelector=r(e.unmaskSelector),e},eD=function(){function e(e,t){this.localConfig=t,this.remoteConfigClient=e}return e.prototype.generateJoinedConfig=function(){var e,t,n;return(0,x.mG)(this,void 0,void 0,function(){var r,i,o,s,a,c,u,l,d,f,h,v,g,p,m,y,b,S=this;return(0,x.Jh)(this,function(w){switch(w.label){case 0:(r=(0,x.pi)({},this.localConfig)).optOut=this.localConfig.optOut,r.captureEnabled=!0,w.label=1;case 1:return w.trys.push([1,3,,4]),[4,new Promise(function(e,t){S.remoteConfigClient.subscribe("configs.sessionReplay","all",function(n,o){if(S.localConfig.loggerProvider.debug("Session Replay remote configuration received from ".concat(o,":"),JSON.stringify(n,null,2)),!n){t(Error("No remote config received"));return}var s,a=n.sr_sampling_config,c=n.sr_privacy_config,u=n.sr_targeting_config,l=null===(s=r.interactionConfig)||void 0===s?void 0:s.ugcFilterRules;r.interactionConfig=n.sr_interaction_config,r.interactionConfig&&l&&(r.interactionConfig.ugcFilterRules=l),r.loggingConfig=n.sr_logging_config,(a||c||u)&&(i={},a&&(i.sr_sampling_config=a),c&&(i.sr_privacy_config=c),u&&(i.sr_targeting_config=u)),e()})})];case 2:return w.sent(),[3,4];case 3:return o=w.sent(),this.localConfig.loggerProvider.error("Failed to generate joined config: ",o),r.captureEnabled=!1,[2,{localConfig:this.localConfig,joinedConfig:r,remoteConfig:void 0}];case 4:if(!i)return[2,{localConfig:this.localConfig,joinedConfig:r,remoteConfig:i}];if(s=i.sr_sampling_config,a=i.sr_privacy_config,c=i.sr_targeting_config,s&&Object.keys(s).length>0?(Object.prototype.hasOwnProperty.call(s,"capture_enabled")?r.captureEnabled=s.capture_enabled:r.captureEnabled=!1,Object.prototype.hasOwnProperty.call(s,"sample_rate")&&(r.sampleRate=s.sample_rate)):(r.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),a){u=null!==(e=r.privacyConfig)&&void 0!==e?e:{},l={defaultMaskLevel:null!==(n=null!==(t=a.defaultMaskLevel)&&void 0!==t?t:u.defaultMaskLevel)&&void 0!==n?n:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},d=function(e){var t,n,r,i,o,s,a,c,u,l={};"string"==typeof e.blockSelector&&(e.blockSelector=[e.blockSelector]);try{for(var d=(0,x.XA)(null!==(a=e.blockSelector)&&void 0!==a?a:[]),f=d.next();!f.done;f=d.next()){var h=f.value;l[h]="block"}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var v=(0,x.XA)(null!==(c=e.maskSelector)&&void 0!==c?c:[]),g=v.next();!g.done;g=v.next()){var h=g.value;l[h]="mask"}}catch(e){r={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}try{for(var p=(0,x.XA)(null!==(u=e.unmaskSelector)&&void 0!==u?u:[]),m=p.next();!m.done;m=p.next()){var h=m.value;l[h]="unmask"}}catch(e){o={error:e}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}return l},f=(0,x.pi)((0,x.pi)({},d(u)),d(a));try{for(v=(h=(0,x.XA)(Object.entries(f))).next();!v.done;v=h.next())p=(g=(0,x.CR)(v.value,2))[0],m=g[1],"mask"===m?l.maskSelector.push(p):"block"===m?l.blockSelector.push(p):"unmask"===m&&l.unmaskSelector.push(p)}catch(e){y={error:e}}finally{try{v&&!v.done&&(b=h.return)&&b.call(h)}finally{if(y)throw y.error}}r.privacyConfig=eM(l,this.localConfig.loggerProvider)}return c&&Object.keys(c).length>0&&(r.targetingConfig=c),this.localConfig.loggerProvider.debug(JSON.stringify({name:"session replay joined config",config:eo(r)},null,2)),[2,{localConfig:this.localConfig,joinedConfig:r,remoteConfig:i}]}})})},e}(),eL=Uint8Array,eq=Uint16Array,eN=Uint32Array,eA=new eL([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eF=new eL([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ej=new eL([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eJ=function(e,t){for(var n=new eq(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new eN(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},eG=eJ(eA,2),eU=eG[0],eB=eG[1];eU[28]=258,eB[258]=28;for(var eW=eJ(eF,0),eK=(eW[0],eW[1]),ez=new eq(32768),eX=0;eX<32768;++eX){var eH=(43690&eX)>>>1|(21845&eX)<<1;eH=(61680&(eH=(52428&eH)>>>2|(13107&eH)<<2))>>>4|(3855&eH)<<4,ez[eX]=((65280&eH)>>>8|(255&eH)<<8)>>>1}for(var eQ=function(e,t,n){for(var r,i=e.length,o=0,s=new eq(t);o<i;++o)++s[e[o]-1];var a=new eq(t);for(o=0;o<t;++o)a[o]=a[o-1]+s[o-1]<<1;if(n){r=new eq(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],l=t-e[o],d=a[e[o]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)r[ez[d]>>>c]=u}else for(o=0,r=new eq(i);o<i;++o)r[o]=ez[a[e[o]-1]++]>>>15-e[o];return r},eV=new eL(288),eX=0;eX<144;++eX)eV[eX]=8;for(var eX=144;eX<256;++eX)eV[eX]=9;for(var eX=256;eX<280;++eX)eV[eX]=7;for(var eX=280;eX<288;++eX)eV[eX]=8;for(var eZ=new eL(32),eX=0;eX<32;++eX)eZ[eX]=5;var e$=eQ(eV,9,0),eY=eQ(eZ,5,0),e0=function(e){return(e/8>>0)+(7&e&&1)},e1=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof eq?eq:e instanceof eN?eN:eL)(n-t);return r.set(e.subarray(t,n)),r},e2=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},e3=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},e4=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new eL(0),0];if(1==i){var s=new eL(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var a=n[0],c=n[1],u=0,l=1,d=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};l!=i-1;)a=n[n[u].f<n[d].f?u++:d++],c=n[u!=l&&n[u].f<n[d].f?u++:d++],n[l++]={s:-1,f:a.f+c.f,l:a,r:c};for(var f=o[0].s,r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var h=new eq(f+1),v=e5(n[l-1],h,0);if(v>t){var r=0,g=0,p=v-t,m=1<<p;for(o.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});r<i;++r){var y=o[r].s;if(h[y]>t)g+=m-(1<<v-h[y]),h[y]=t;else break}for(g>>>=p;g>0;){var b=o[r].s;h[b]<t?g-=1<<t-h[b]++-1:++r}for(;r>=0&&g;--r){var S=o[r].s;h[S]==t&&(--h[S],++g)}v=t}return[new eL(h),v]},e5=function(e,t,n){return -1==e.s?Math.max(e5(e.l,t,n+1),e5(e.r,t,n+1)):t[e.s]=n},e6=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new eq(++t),r=0,i=e[0],o=1,s=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},e8=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},e7=function(e,t,n){var r=n.length,i=e0(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return(i+4+r)*8},e9=function(e,t,n,r,i,o,s,a,c,u,l){e2(t,l++,n),++i[256];for(var d,f,h,v,g=e4(i,15),p=g[0],m=g[1],y=e4(o,15),b=y[0],S=y[1],w=e6(p),I=w[0],C=w[1],E=e6(b),P=E[0],k=E[1],R=new eq(19),T=0;T<I.length;++T)R[31&I[T]]++;for(var T=0;T<P.length;++T)R[31&P[T]]++;for(var _=e4(R,7),x=_[0],O=_[1],M=19;M>4&&!x[ej[M-1]];--M);var D=u+5<<3,L=e8(i,eV)+e8(o,eZ)+s,q=e8(i,p)+e8(o,b)+s+14+3*M+e8(R,x)+(2*R[16]+3*R[17]+7*R[18]);if(D<=L&&D<=q)return e7(t,l,e.subarray(c,c+u));if(e2(t,l,1+(q<L)),l+=2,q<L){d=eQ(p,m,0),f=p,h=eQ(b,S,0),v=b;var N=eQ(x,O,0);e2(t,l,C-257),e2(t,l+5,k-1),e2(t,l+10,M-4),l+=14;for(var T=0;T<M;++T)e2(t,l+3*T,x[ej[T]]);l+=3*M;for(var A=[I,P],F=0;F<2;++F)for(var j=A[F],T=0;T<j.length;++T){var J=31&j[T];e2(t,l,N[J]),l+=x[J],J>15&&(e2(t,l,j[T]>>>5&127),l+=j[T]>>>12)}}else d=e$,f=eV,h=eY,v=eZ;for(var T=0;T<a;++T)if(r[T]>255){var J=r[T]>>>18&31;e3(t,l,d[J+257]),l+=f[J+257],J>7&&(e2(t,l,r[T]>>>23&31),l+=eA[J]);var G=31&r[T];e3(t,l,h[G]),l+=v[G],G>3&&(e3(t,l,r[T]>>>5&8191),l+=eF[G])}else e3(t,l,d[r[T]]),l+=f[r[T]];return e3(t,l,d[256]),l+f[256]},te=new eN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tt=function(e,t,n,r,i,o){var s=e.length,a=new eL(r+s+5*(1+Math.floor(s/7e3))+i),c=a.subarray(r,a.length-i),u=0;if(!t||s<8)for(var l=0;l<=s;l+=65535){var d=l+65535;d<s?u=e7(c,u,e.subarray(l,d)):(c[l]=o,u=e7(c,u,e.subarray(l,s)))}else{for(var f=te[t-1],h=f>>>13,v=8191&f,g=(1<<n)-1,p=new eq(32768),m=new eq(g+1),y=Math.ceil(n/3),b=2*y,S=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&g},w=new eN(25e3),I=new eq(288),C=new eq(32),E=0,P=0,l=0,k=0,R=0,T=0;l<s;++l){var _=S(l),x=32767&l,O=m[_];if(p[x]=O,m[_]=x,R<=l){var M=s-l;if((E>7e3||k>24576)&&M>423){u=e9(e,c,0,w,I,C,P,k,T,l-T,u),k=E=P=0,T=l;for(var D=0;D<286;++D)I[D]=0;for(var D=0;D<30;++D)C[D]=0}var L=2,q=0,N=v,A=x-O&32767;if(M>2&&_==S(l-A))for(var F=Math.min(h,M)-1,j=Math.min(32767,l),J=Math.min(258,M);A<=j&&--N&&x!=O;){if(e[l+L]==e[l+L-A]){for(var G=0;G<J&&e[l+G]==e[l+G-A];++G);if(G>L){if(L=G,q=A,G>F)break;for(var U=Math.min(A,G-2),B=0,D=0;D<U;++D){var W=l-A+D+32768&32767,K=p[W],z=W-K+32768&32767;z>B&&(B=z,O=W)}}}O=p[x=O],A+=x-O+32768&32767}if(q){w[k++]=268435456|eB[L]<<18|eK[q];var X=31&eB[L],H=31&eK[q];P+=eA[X]+eF[H],++I[257+X],++C[H],R=l+L,++E}else w[k++]=e[l],++I[e[l]]}}u=e9(e,c,o,w,I,C,P,k,T,l-T,u)}return e1(a,0,r+e0(u)+i)},tn=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length,s=0;s!=o;){for(var a=Math.min(s+5552,o);s<a;++s)r+=n[s],i+=r;r%=65521,i%=65521}e=r,t=i},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+((255&e)<<23)*2}}},tr=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ti=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)};let to=e=>{var t,n,r,i,o;return function(e,t){var n="";if(!t&&"undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var r=0;r<e.length;){var i=e[r++];i<128||t?n+=String.fromCharCode(i):i<224?n+=String.fromCharCode((31&i)<<6|63&e[r++]):i<240?n+=String.fromCharCode((15&i)<<12|(63&e[r++])<<6|63&e[r++]):n+=String.fromCharCode(55296|(i=((15&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536)>>10,56320|1023&i)}return n}((t=function(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);for(var r=new eL(e.length+(e.length>>>1)),i=0,o=function(e){r[i++]=e},s=0;s<n;++s){if(i+5>r.length){var a=new eL(i+8+(n-s<<1));a.set(r),r=a}var c=e.charCodeAt(s);c<128?o(c):(c<2048?o(192|c>>>6):(c>55295&&c<57344?(o(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++s))>>>18),o(128|c>>>12&63)):o(224|c>>>12),o(128|c>>>6&63)),o(128|63&c))}return e1(r,0,i)}(JSON.stringify({...e,v:"v1"})),void 0===n&&(n={}),(r=tn()).p(t),ti(o=tt(t,null==(i=n).level?6:i.level,null==i.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+i.mem,2,4,!0),n),tr(o,o.length-4,r.d()),o),!0)};var ts=function(){function e(e,t,n,r){var i,o=this;this.taskQueue=[],this.isProcessing=!1,this.compressEvent=function(e){return JSON.stringify(to(e))},this.addCompressedEventToManager=function(e,t){o.eventsManager&&o.deviceId&&o.eventsManager.addEvent({event:{type:"replay",data:e},sessionId:t,deviceId:o.deviceId})},this.addCompressedEvent=function(e,t){if(o.worker)try{o.worker.postMessage({event:e,sessionId:t})}catch(n){"DataCloneError"===n.name?o.worker.postMessage(JSON.stringify({event:e,sessionId:t})):o.config.loggerProvider.warn("Unexpected error while posting message to worker:",n)}else{var n=o.compressEvent(e);o.addCompressedEventToManager(n,t)}},this.terminate=function(){var e;null===(e=o.worker)||void 0===e||e.terminate()};var s=(0,H.l)();if(this.canUseIdleCallback=s&&"requestIdleCallback"in s,this.eventsManager=e,this.config=t,this.deviceId=n,this.timeout=(null===(i=t.performanceConfig)||void 0===i?void 0:i.timeout)||2e3,r){t.loggerProvider.log("Enabling web worker for compression");var a=new Worker(URL.createObjectURL(new Blob([r],{type:"application/javascript"})));a.onerror=function(e){t.loggerProvider.error(e)},a.onmessage=function(e){var t=e.data,n=t.compressedEvent,r=t.sessionId;o.addCompressedEventToManager(n,r)},this.worker=a}}return e.prototype.scheduleIdleProcessing=function(){var e=this;this.isProcessing||(this.isProcessing=!0,requestIdleCallback(function(t){e.processQueue(t)},{timeout:this.timeout}))},e.prototype.enqueueEvent=function(e,t){var n;this.canUseIdleCallback&&(null===(n=this.config.performanceConfig)||void 0===n?void 0:n.enabled)?(this.config.loggerProvider.debug("Enqueuing event for processing during idle time."),this.taskQueue.push({event:e,sessionId:t}),this.scheduleIdleProcessing()):(this.config.loggerProvider.debug("Processing event without idle callback."),this.addCompressedEvent(e,t))},e.prototype.processQueue=function(e){for(var t=this;this.taskQueue.length>0&&(e.timeRemaining()>0||e.didTimeout);){var n=this.taskQueue.shift();if(n){var r=n.event,i=n.sessionId;this.addCompressedEvent(r,i)}}this.taskQueue.length>0?requestIdleCallback(function(e){t.processQueue(e)},{timeout:this.timeout}):this.isProcessing=!1},e}(),ta="Failed to store session replay events in IndexedDB",tc="1.30.8",tu=function(){function e(e){var t=e.trackServerUrl,n=e.loggerProvider,r=e.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=n,this.payloadBatcher=r||function(e){return e},this.trackServerUrl=t}return e.prototype.sendEventsList=function(e){this.addToQueue((0,x.pi)((0,x.pi)({},e),{attempts:0,timeout:0}))},e.prototype.addToQueue=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.filter(function(t){return t.attempts<(t.flushMaxRetries||0)?(t.attempts+=1,!0):(e.completeRequest({context:t,err:"Session replay event batch rejected due to exceeded retry count"}),!1)}).forEach(function(t){if(e.queue=e.queue.concat(t),0===t.timeout){e.schedule(0);return}setTimeout(function(){t.timeout=0,e.schedule(0)},t.timeout)})},e.prototype.schedule=function(e){var t=this;this.scheduled||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),(0,x.mG)(this,void 0,void 0,function(){var t,n,r=this;return(0,x.Jh)(this,function(i){switch(i.label){case 0:return t=[],n=[],this.queue.forEach(function(e){return 0===e.timeout?t.push(e):n.push(e)}),this.queue=n,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(t.map(function(t){return r.send(t,e)}))];case 1:return i.sent(),[2]}})})},e.prototype.send=function(e,t){var n,r;return void 0===t&&(t=!0),(0,x.mG)(this,void 0,void 0,function(){var i,o,s,a,c,u,l,d,f,h,v,g;return(0,x.Jh)(this,function(p){switch(p.label){case 0:if(!(i=e.apiKey))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing api key"})];if(!(o=e.deviceId))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing device ID"})];if(s=Y(),a=tc,c=e.sampleRate,u=new URLSearchParams({device_id:o,session_id:"".concat(e.sessionId),type:"".concat(e.type)}),l="".concat((null===(n=e.version)||void 0===n?void 0:n.type)||"standalone","/").concat((null===(r=e.version)||void 0===r?void 0:r.version)||a),0===(d=this.payloadBatcher({version:1,events:e.events})).events.length)return this.completeRequest({context:e}),[2];p.label=1;case 1:return p.trys.push([1,3,,4]),f={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(i),"X-Client-Version":a,"X-Client-Library":l,"X-Client-Url":s.substring(0,1e3),"X-Client-Sample-Rate":"".concat(c)},body:JSON.stringify(d),method:"POST"},[4,fetch("".concat(ee(e.serverZone,this.trackServerUrl),"?").concat(u.toString()),f)];case 2:if(null===(h=p.sent()))return this.completeRequest({context:e,err:"Unexpected error occurred"}),[2];if(t)this.handleReponse(h.status,e);else{v="";try{v=JSON.stringify(h.body,null,2)}catch(e){}this.completeRequest({context:e,success:"".concat(h.status,": ").concat(v)})}return[3,4];case 3:return g=p.sent(),this.completeRequest({context:e,err:g}),[3,4];case 4:return[2]}})})},e.prototype.handleReponse=function(e,t){switch(new D().buildStatus(e)){case o.Success:this.handleSuccessResponse(t);break;case o.Failed:this.handleOtherResponse(t);break;default:this.completeRequest({context:t,err:"Network error occurred, event batch rejected"})}},e.prototype.handleSuccessResponse=function(e){var t=Math.round(new Blob(e.events).size/1024);this.completeRequest({context:e,success:"Session replay event batch tracked successfully for session id ".concat(e.sessionId,", size of events: ").concat(t," KB")})},e.prototype.handleOtherResponse=function(e){this.addToQueue((0,x.pi)((0,x.pi)({},e),{timeout:e.attempts*this.retryTimeout}))},e.prototype.completeRequest=function(e){var t=e.context,n=e.err,r=e.success;t.onComplete(),n?this.loggerProvider.warn(n):r&&this.loggerProvider.log(r)},e}(),tl=n(53673),td=function(){function e(e){var t,n,r,i=this;this.minInterval=500,this.maxInterval=1e4,this.maxPersistedEventsSize=1e6,this.interval=this.minInterval,this._timeAtLastSplit=Date.now(),this.shouldSplitEventsList=function(e,t){var n=i.getStringSize(t);return i.getEventsArraySize(e)+n>=i.maxPersistedEventsSize||Date.now()-i.timeAtLastSplit>i.interval&&!!e.length&&(i.interval=Math.min(i.maxInterval,i.interval+i.minInterval),i._timeAtLastSplit=Date.now(),!0)},this.loggerProvider=e.loggerProvider,this.minInterval=null!==(t=e.minInterval)&&void 0!==t?t:this.minInterval,this.maxInterval=null!==(n=e.maxInterval)&&void 0!==n?n:this.maxInterval,this.maxPersistedEventsSize=null!==(r=e.maxPersistedEventsSize)&&void 0!==r?r:this.maxPersistedEventsSize}return Object.defineProperty(e.prototype,"timeAtLastSplit",{get:function(){return this._timeAtLastSplit},enumerable:!1,configurable:!0}),e.prototype.getStringSize=function(e){return e.length},e.prototype.getEventsArraySize=function(e){var t,n,r=0;try{for(var i=(0,x.XA)(e),o=i.next();!o.done;o=i.next()){var s=o.value;r+=this.getStringSize(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r+(2+Math.max(0,e.length-1)+2*e.length)},e}();(R=l||(l={})).RECORDING="recording",R.SENT="sent";var tf="sessionCurrentSequence",th="sequencesToSend",tv=function(){var e=(0,H.l)();return new Promise(function(t,n){if(!e)return n(Error("Global scope not found"));if(!e.indexedDB)return n(Error("Session Replay: cannot find indexedDB"));try{var r=e.indexedDB.open("keyval-store"),i=!1;r.onupgradeneeded=function(){1===r.result.version&&(i=!0)},r.onsuccess=function(){if(i){try{r.result.close()}catch(e){}try{e.indexedDB.deleteDatabase("keyval-store")}catch(e){}t();return}t(r.result)},r.onerror=function(e){var i;if((null===(i=r.error)||void 0===i?void 0:i.name)==="AbortError"){e.preventDefault(),t();return}n(r.error)}}catch(e){n(e)}})},tg=function(e){return(0,x.mG)(void 0,void 0,void 0,function(){return(0,x.Jh)(this,function(t){switch(t.label){case 0:if(!(e.length>0))return[3,2];return[4,Promise.all(e.splice(0,10))];case 1:return t.sent(),[3,0];case 2:return[2]}})})},tp=function(e){var t,n;return e.objectStoreNames.contains(tf)||(n=e.createObjectStore(tf,{keyPath:"sessionId"})),e.objectStoreNames.contains(th)||(t=e.createObjectStore(th,{keyPath:"sequenceId",autoIncrement:!0})).createIndex("sessionId","sessionId"),{sequencesStore:t,currentSequenceStore:n}},tm=function(e){function t(t){var n=e.call(this,t)||this;return n.getSequencesToSend=function(){return(0,x.mG)(n,void 0,void 0,function(){var e,t,n,r,i,o;return(0,x.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),e=[],[4,this.db.transaction("sequencesToSend").store.openCursor()];case 1:t=s.sent(),s.label=2;case 2:if(!t)return[3,4];return r=(n=t.value).sessionId,i=n.events,e.push({events:i,sequenceId:t.key,sessionId:r}),[4,t.continue()];case 3:return t=s.sent(),[3,2];case 4:return[2,e];case 5:return o=s.sent(),this.loggerProvider.warn("".concat(ta,": ").concat(o)),[3,6];case 6:return[2,void 0]}})})},n.storeCurrentSequence=function(e){return(0,x.mG)(n,void 0,void 0,function(){var t,n,r;return(0,x.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,this.db.get(tf,e)];case 1:if(!(t=i.sent()))return[2,void 0];return[4,this.db.put(th,{sessionId:e,events:t.events})];case 2:return n=i.sent(),[4,this.db.put(tf,{sessionId:e,events:[]})];case 3:return i.sent(),[2,(0,x.pi)((0,x.pi)({},t),{sessionId:e,sequenceId:n})];case 4:return r=i.sent(),this.loggerProvider.warn("".concat(ta,": ").concat(r)),[3,5];case 5:return[2,void 0]}})})},n.addEventToCurrentSequence=function(e,t){return(0,x.mG)(n,void 0,void 0,function(){var n,r,i,o,s,a;return(0,x.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,10,,11]),[4,(n=this.db.transaction(tf,"readwrite")).store.get(e)];case 1:if(r=c.sent())return[3,3];return[4,n.store.put({sessionId:e,events:[t]})];case 2:return c.sent(),[2];case 3:if(i=void 0,!this.shouldSplitEventsList(r.events,t))return[3,5];return i=r.events,[4,n.store.put({sessionId:e,events:[t]})];case 4:return c.sent(),[3,7];case 5:return o=r.events.concat(t),[4,n.store.put({sessionId:e,events:o})];case 6:c.sent(),c.label=7;case 7:return[4,n.done];case 8:if(c.sent(),!i)return[2,void 0];return[4,this.storeSendingEvents(e,i)];case 9:if(!(s=c.sent()))return[2,void 0];return[2,{events:i,sessionId:e,sequenceId:s}];case 10:return a=c.sent(),this.loggerProvider.warn("".concat(ta,": ").concat(a)),[3,11];case 11:return[2,void 0]}})})},n.storeSendingEvents=function(e,t){return(0,x.mG)(n,void 0,void 0,function(){var n;return(0,x.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.db.put(th,{sessionId:e,events:t})];case 1:return[2,r.sent()];case 2:return n=r.sent(),this.loggerProvider.warn("".concat(ta,": ").concat(n)),[3,3];case 3:return[2,void 0]}})})},n.cleanUpSessionEventsStore=function(e,t){return(0,x.mG)(n,void 0,void 0,function(){var e;return(0,x.Jh)(this,function(n){switch(n.label){case 0:if(!t)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.db.delete(th,t)];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),this.loggerProvider.warn("".concat(ta,": ").concat(e)),[3,4];case 4:return[2]}})})},n.transitionFromKeyValStore=function(e){return(0,x.mG)(n,void 0,void 0,function(){var t,n,r,i,o,s,a,c=this;return(0,x.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),[4,tv()];case 1:if(!(t=u.sent()))return[2];n=function(e,t){return(0,x.mG)(c,void 0,void 0,function(){var n,r,i=this;return(0,x.Jh)(this,function(o){switch(o.label){case 0:return n=t.sessionSequences,r=[],Object.keys(n).forEach(function(o){var s=parseInt(o,10),a=n[s];if(s===t.currentSequenceId){var c=a.events.map(function(t){return(0,x.mG)(i,void 0,void 0,function(){return(0,x.Jh)(this,function(n){return[2,this.addEventToCurrentSequence(e,t)]})})});r.push.apply(r,(0,x.ev)([],(0,x.CR)(c),!1))}else a.status!==l.SENT&&r.push(i.storeSendingEvents(e,a.events))}),[4,tg(r)];case 1:return o.sent(),[2]}})})},r="".concat(q,"_").concat(this.apiKey.substring(0,10)),u.label=2;case 2:return u.trys.push([2,4,,5]),i=t.transaction("keyval").objectStore("keyval").getAll(r),[4,new Promise(function(t){i.onsuccess=function(r){return(0,x.mG)(c,void 0,void 0,function(){var i,o,s,a=this;return(0,x.Jh)(this,function(c){switch(c.label){case 0:if(!(o=(i=r&&r.target.result)&&i[0]))return[3,2];return s=[],Object.keys(o).forEach(function(t){var r=parseInt(t,10),i=o[r];if(e===r)s.push(n(r,i));else{var c=i.sessionSequences;Object.keys(c).forEach(function(e){var t=parseInt(e,10);c[t].status!==l.SENT&&s.push(a.storeSendingEvents(r,c[t].events))})}}),[4,tg(s)];case 1:c.sent(),c.label=2;case 2:return t(),[2]}})})}})];case 3:return u.sent(),(o=(0,H.l)())&&o.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return s=u.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(s)),[3,5];case 5:return[3,7];case 6:return a=u.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(a,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}})})},n.apiKey=t.apiKey,n.db=t.db,n}return(0,x.ZT)(t,e),t.new=function(e,n,r){return(0,x.mG)(this,void 0,void 0,function(){var i,o,s,a;return(0,x.Jh)(this,function(c){switch(c.label){case 0:var u;return c.trys.push([0,3,,4]),i="replay"===e?"":"_".concat(e),[4,(u="".concat(n.apiKey.substring(0,10),"_amp_session_replay_events").concat(i),(0,x.mG)(void 0,void 0,void 0,function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,tl.X3)(u,1,{upgrade:tp})];case 1:return[2,e.sent()]}})}))];case 1:return o=c.sent(),[4,(s=new t((0,x.pi)((0,x.pi)({},n),{db:o}))).transitionFromKeyValStore(r)];case 2:return c.sent(),[2,s];case 3:return a=c.sent(),n.loggerProvider.warn("".concat(ta,": ").concat(a)),[3,4];case 4:return[2]}})})},t.prototype.getCurrentSequenceEvents=function(e){return(0,x.mG)(this,void 0,void 0,function(){var t,n,r,i,o,s;return(0,x.Jh)(this,function(a){switch(a.label){case 0:if(!e)return[3,2];return[4,this.db.get("sessionCurrentSequence",e)];case 1:if(!(t=a.sent()))return[2,void 0];return[2,[t]];case 2:n=[],a.label=3;case 3:return a.trys.push([3,8,9,10]),[4,this.db.getAll("sessionCurrentSequence")];case 4:i=(r=x.XA.apply(void 0,[a.sent()])).next(),a.label=5;case 5:if(i.done)return[3,7];t=i.value,n.push(t),a.label=6;case 6:return i=r.next(),[3,5];case 7:return[3,10];case 8:return o={error:a.sent()},[3,10];case 9:try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 10:return[2,n]}})})},t}(td),ty=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finalizedSequences={},t.sequences={},t.sequenceId=0,t}return(0,x.ZT)(t,e),t.prototype.resetCurrentSequence=function(e){this.sequences[e]=[]},t.prototype.addSequence=function(e){var t=this.sequenceId++,n=(0,x.ev)([],(0,x.CR)(this.sequences[e]),!1);return this.finalizedSequences[t]={sessionId:e,events:n},this.resetCurrentSequence(e),{sequenceId:t,events:n,sessionId:e}},t.prototype.getSequencesToSend=function(){return(0,x.mG)(this,void 0,void 0,function(){return(0,x.Jh)(this,function(e){return[2,Object.entries(this.finalizedSequences).map(function(e){var t=(0,x.CR)(e,2),n=t[0],r=t[1],i=r.sessionId,o=r.events;return{sequenceId:Number(n),sessionId:i,events:o}})]})})},t.prototype.storeCurrentSequence=function(e){return(0,x.mG)(this,void 0,void 0,function(){return(0,x.Jh)(this,function(t){return this.sequences[e]?[2,this.addSequence(e)]:[2,void 0]})})},t.prototype.addEventToCurrentSequence=function(e,t){return(0,x.mG)(this,void 0,void 0,function(){var n;return(0,x.Jh)(this,function(r){return this.sequences[e]||this.resetCurrentSequence(e),this.shouldSplitEventsList(this.sequences[e],t)&&(n=this.addSequence(e)),this.sequences[e].push(t),[2,n]})})},t.prototype.storeSendingEvents=function(e,t){return(0,x.mG)(this,void 0,void 0,function(){return(0,x.Jh)(this,function(n){return this.finalizedSequences[this.sequenceId]={sessionId:e,events:t},[2,this.sequenceId++]})})},t.prototype.cleanUpSessionEventsStore=function(e,t){return(0,x.mG)(this,void 0,void 0,function(){return(0,x.Jh)(this,function(e){return void 0!==t&&delete this.finalizedSequences[t],[2]})})},t}(td),tb=function(e){var t=e.config,n=e.sessionId,r=e.minInterval,i=e.maxInterval,o=e.type,s=e.payloadBatcher,a=e.storeType;return(0,x.mG)(void 0,void 0,void 0,function(){var e,c,u,l,d,f;function h(t){return void 0===t&&(t=!1),(0,x.mG)(this,void 0,void 0,function(){return(0,x.Jh)(this,function(n){return[2,e.flush(t)]})})}return(0,x.Jh)(this,function(v){switch(v.label){case 0:if(e=new tu((0,x.pi)((0,x.pi)({},t),{loggerProvider:t.loggerProvider,payloadBatcher:s})),c=function(){return new ty({loggerProvider:t.loggerProvider,maxInterval:i,minInterval:r})},u=function(){return(0,x.mG)(void 0,void 0,void 0,function(){var e;return(0,x.Jh)(this,function(s){switch(s.label){case 0:return[4,tm.new(o,{loggerProvider:t.loggerProvider,minInterval:r,maxInterval:i,apiKey:t.apiKey},n)];case 1:return e=s.sent(),t.loggerProvider.log("Failed to initialize idb store, falling back to memory store."),[2,null!=e?e:c()]}})})},"idb"!==a)return[3,2];return[4,u()];case 1:return d=v.sent(),[3,3];case 2:d=c(),v.label=3;case 3:return l=d,f=function(n){var r=n.events,i=n.sessionId,s=n.deviceId,a=n.sequenceId;t.debugMode&&ei().then(function(e){var n=e.totalStorageSize,r=e.percentOfQuota,i=e.usageDetails;t.loggerProvider.debug("Total storage size: ".concat(n," KB, percentage of quota: ").concat(r,"%, usage details: ").concat(i))}).catch(function(){}),e.sendEventsList({events:r,sessionId:i,flushMaxRetries:t.flushMaxRetries,apiKey:t.apiKey,deviceId:s,sampleRate:t.sampleRate,serverZone:t.serverZone,version:t.version,type:o,onComplete:function(){return(0,x.mG)(void 0,void 0,void 0,function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return[4,l.cleanUpSessionEventsStore(i,a)];case 1:return e.sent(),[2]}})})}})},[2,{sendCurrentSequenceEvents:function(e){var n=e.sessionId,r=e.deviceId;l.storeCurrentSequence(n).then(function(e){e&&f({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:r})}).catch(function(e){t.loggerProvider.warn("Failed to get current sequence of session replay events for session:",e)})},addEvent:function(e){var n=e.event,r=e.sessionId,i=e.deviceId;l.addEventToCurrentSequence(r,n.data).then(function(e){return e&&f({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:i})}).catch(function(e){t.loggerProvider.warn("Failed to add event to session replay capture:",e)})},sendStoredEvents:function(e){var t=e.deviceId;return(0,x.mG)(void 0,void 0,void 0,function(){var e;return(0,x.Jh)(this,function(n){switch(n.label){case 0:return[4,l.getSequencesToSend()];case 1:return(e=n.sent())&&e.forEach(function(e){f({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:t})}),[2]}})})},flush:h}]}})})},tS=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new Map;e.forEach(function(e){n.set(e.name,e.manager)}),this.managers=n}return e.prototype.sendStoredEvents=function(e){return(0,x.mG)(this,void 0,void 0,function(){var t;return(0,x.Jh)(this,function(n){switch(n.label){case 0:return t=[],this.managers.forEach(function(n){t.push(n.sendStoredEvents(e))}),[4,Promise.all(t)];case 1:return n.sent(),[2]}})})},e.prototype.addEvent=function(e){var t,n=e.sessionId,r=e.event,i=e.deviceId;null===(t=this.managers.get(r.type))||void 0===t||t.addEvent({sessionId:n,event:r,deviceId:i})},e.prototype.sendCurrentSequenceEvents=function(e){var t=e.sessionId,n=e.deviceId;this.managers.forEach(function(e){e.sendCurrentSequenceEvents({sessionId:t,deviceId:n})})},e.prototype.flush=function(e){return(0,x.mG)(this,void 0,void 0,function(){var t;return(0,x.Jh)(this,function(n){switch(n.label){case 0:return t=[],this.managers.forEach(function(n){t.push(n.flush(e))}),[4,Promise.all(t)];case 1:return n.sent(),[2]}})})},e}();function tw(e,t,n){for(var r=null,i=[],o=e,s=0;o&&"break"!==function(){var e,a,c,u,l=new Date().getTime()-h.getTime();if(void 0!==d.timeoutMs&&l>d.timeoutMs)throw Error("Timeout: Can't find a unique selector after ".concat(l,"ms"));var f=t_((e=o.getAttribute("id"))&&d.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null)||t_.apply(void 0,(0,x.ev)([],(0,x.CR)(Array.from(o.attributes).filter(function(e){return d.attr(e.name,e.value)}).map(function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}})),!1))||t_.apply(void 0,(0,x.ev)([],(0,x.CR)(Array.from(o.classList).filter(d.className).map(function(e){return{name:"."+CSS.escape(e),penalty:1}})),!1))||t_((a=o.tagName.toLowerCase(),d.tagName(a)?{name:a,penalty:2}:null))||[tk()],v=function(e){var t=e.parentNode;if(!t)return null;var n=t.firstChild;if(!n)return null;for(var r=0;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==e);)n=n.nextSibling;return r}(o);if("all"==t)v&&(f=f.concat(f.filter(tT).map(function(e){return tR(e,v)})));else if("two"==t)f=f.slice(0,1),v&&(f=f.concat(f.filter(tT).map(function(e){return tR(e,v)})));else if("one"==t){var g=(0,x.CR)(f=f.slice(0,1),1)[0];v&&tT(g)&&(f=[tR(g,v)])}else"none"==t&&(f=[tk()],v&&(f=[tR(f[0],v)]));try{for(var p=(c=void 0,(0,x.XA)(f)),m=p.next();!m.done;m=p.next()){var g=m.value;g.level=s}}catch(e){c={error:e}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(c)throw c.error}}if(i.push(f),i.length>=d.seedMinLength&&(r=tI(i,n)))return"break";o=o.parentElement,s++}(););return(r||(r=tI(i,n)),!r&&n)?n():r}function tI(e,t){var n,r,i=tO(function e(t,n){var r,i,o,s,a;return void 0===n&&(n=[]),(0,x.Jh)(this,function(c){switch(c.label){case 0:if(!(t.length>0))return[3,9];c.label=1;case 1:c.trys.push([1,6,7,8]),i=(r=(0,x.XA)(t[0])).next(),c.label=2;case 2:if(i.done)return[3,5];return o=i.value,[5,(0,x.XA)(e(t.slice(1,t.length),n.concat(o)))];case 3:c.sent(),c.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s={error:c.sent()},[3,8];case 7:try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,n];case 10:c.sent(),c.label=11;case 11:return[2]}})}(e));if(i.length>d.threshold)return t?t():null;try{for(var o=(0,x.XA)(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(tP(a))return a}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}function tC(e){for(var t=e[0],n=t.name,r=1;r<e.length;r++){var i=e[r].level||0;n=t.level===i-1?"".concat(e[r].name," > ").concat(n):"".concat(e[r].name," ").concat(n),t=e[r]}return n}function tE(e){return e.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function tP(e){var t=tC(e);switch(f.querySelectorAll(t).length){case 0:throw Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function tk(){return{name:"*",penalty:3}}function tR(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function tT(e){return"html"!==e.name&&!e.name.startsWith("#")}function t_(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(tx);return n.length>0?n:null}function tx(e){return null!=e}function tO(e){return(0,x.ev)([],(0,x.CR)(e),!1).sort(function(e,t){return tE(e)-tE(t)})}var tM=function(e){var t=e.version,n=e.events,r=[];return n.forEach(function(e){var t=JSON.parse(e);t.count=1,"click"===t.type&&r.push(t)}),{version:t,events:r}},tD=function(e){var t=e.version,n=e.events,r=[];return n.forEach(function(e){var t=JSON.parse(e);"click"===t.type&&r.push(t)}),{version:t,events:Object.values(r.reduce(function(e,t){var n=t.x,r=t.y,i=t.selector,o=t.timestamp,s=o-o%36e5,a="".concat(n,":").concat(r,":").concat(null!=i?i:"",":").concat(s);return e[a]?e[a].count+=1:e[a]=(0,x.pi)((0,x.pi)({},t),{timestamp:s,count:1}),e},{}))}},tL=function(e,t){var n=this;this.createHook=function(e){var t=e.eventsManager,r=e.sessionId,i=e.deviceIdFn,o=e.mirror,s=e.ugcFilterRules,a=e.performanceOptions;return function(e){if(e.type===eI.Click){var c,u=(0,H.l)();if(u){var l=u.location,v=u.innerHeight,g=u.innerWidth;if(l){var p=e.x,m=e.y;if(void 0!==p&&void 0!==m){var y=o.getNode(e.id);if(y)try{c=function(e,t){if(h=new Date,e.nodeType!==Node.ELEMENT_NODE)throw Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var n,r={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};f=(n=(d=(0,x.pi)((0,x.pi)({},r),t)).root).nodeType===Node.DOCUMENT_NODE?n:n===r.root?n.ownerDocument:n;var i=tw(e,"all",function(){return tw(e,"two",function(){return tw(e,"one",function(){return tw(e,"none")})})});if(i){var o=tO(function e(t,n,r){var i,o,s;return void 0===r&&(r={counter:0,visited:new Map}),(0,x.Jh)(this,function(a){switch(a.label){case 0:if(!(t.length>2&&t.length>d.optimizedMinLength))return[3,5];i=1,a.label=1;case 1:var c;if(!(i<t.length-1))return[3,5];if(r.counter>d.maxNumberOfTries||(r.counter+=1,(o=(0,x.ev)([],(0,x.CR)(t),!1)).splice(i,1),s=tC(o),r.visited.has(s)))return[2];if(!(tP(o)&&(c=o,f.querySelector(tC(c))===n)))return[3,4];return[4,o];case 2:return a.sent(),r.visited.set(s,!0),[5,(0,x.XA)(e(o,n,r))];case 3:a.sent(),a.label=4;case 4:return i++,[3,1];case 5:return[2]}})}(i,e));return o.length>0&&(i=o[0]),tC(i)}throw Error("Selector was not found.")}(y,a)}catch(e){n.logger.debug("error resolving selector from finder")}var b=er(l.href,s),S={x:p+n.scrollWatcher.currentScrollX,y:m+n.scrollWatcher.currentScrollY,selector:c,viewportHeight:v,viewportWidth:g,pageUrl:b,timestamp:Date.now(),type:"click"},w=i();w&&t.addEvent({sessionId:r,event:{type:"interaction",data:JSON.stringify(S)},deviceId:w})}}}}}},this.logger=e,this.scrollWatcher=t};function tq(){var e=(0,H.l)();return(null==e?void 0:e.innerHeight)||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function tN(){var e=(0,H.l)();return(null==e?void 0:e.innerWidth)||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}var tA=function(){function e(e,t){var n=(0,H.l)();n&&n.navigator&&"function"==typeof n.navigator.sendBeacon?this.sendBeacon=function(e,t){try{if(n.navigator.sendBeacon(e,JSON.stringify(t)))return!0}catch(e){}return!1}:this.sendBeacon=function(){return!1},this.sendXhr=function(e,t){var n=new XMLHttpRequest;return n.open("POST",e,!0),n.setRequestHeader("Accept","*/*"),n.send(JSON.stringify(t)),!0},this.basePageUrl=ee(t.serverZone,t.trackServerUrl),this.apiKey=t.apiKey,this.context=e}return e.prototype.send=function(e,t){var n=this.context,r=n.sessionId,i=n.type,o=new URLSearchParams({device_id:e,session_id:String(r),type:String(i),api_key:this.apiKey}),s="".concat(this.basePageUrl,"?").concat(o.toString());this.sendBeacon(s,t)||this.sendXhr(s,t)},e}(),tF=function(){function e(e,t){var n=this;this.timestamp=Date.now(),this.hook=function(e){n.update(e)},this.send=function(e){return function(t){var r,i,o=e(),s=(0,H.l)();s&&o&&n.transport.send(o,{version:1,events:[{maxScrollX:n._maxScrollX,maxScrollY:n._maxScrollY,maxScrollWidth:n._maxScrollWidth,maxScrollHeight:n._maxScrollHeight,viewportHeight:tq(),viewportWidth:tN(),pageUrl:er(s.location.href,null!==(i=null===(r=n.config.interactionConfig)||void 0===r?void 0:r.ugcFilterRules)&&void 0!==i?i:[]),timestamp:n.timestamp,type:"scroll"}]})}},this._maxScrollX=0,this._maxScrollY=0,this._currentScrollX=0,this._currentScrollY=0,this._maxScrollWidth=tN(),this._maxScrollHeight=tq(),this.config=t,this.transport=e}return e.default=function(t,n){return new e(new tA(t,n),n)},Object.defineProperty(e.prototype,"maxScrollX",{get:function(){return this._maxScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollY",{get:function(){return this._maxScrollY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollWidth",{get:function(){return this._maxScrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollHeight",{get:function(){return this._maxScrollHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScrollX",{get:function(){return this._currentScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScrollY",{get:function(){return this._currentScrollY},enumerable:!1,configurable:!0}),e.prototype.update=function(e){var t=Date.now();if(this._currentScrollX=e.x,this._currentScrollY=e.y,e.x>this._maxScrollX){var n=tN();this._maxScrollX=e.x;var r=e.x+n;r>this._maxScrollWidth&&(this._maxScrollWidth=r),this.timestamp=t}if(e.y>this._maxScrollY){var i=tq();this._maxScrollY=e.y;var o=e.y+i;o>this._maxScrollHeight&&(this._maxScrollHeight=o),this.timestamp=t}},e}(),tj=function(e){var t=e.sessionId,n=e.deviceId;this.deviceId=n,this.sessionId=t,t&&n&&(this.sessionReplayId="".concat(n,"/").concat(t))},tJ=new function(){var e=this;this.dbs={},this.createStore=function(t){return(0,x.mG)(e,void 0,void 0,function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,tl.X3)(t,1,{upgrade:function(e){e.objectStoreNames.contains("sessionTargetingMatch")||e.createObjectStore("sessionTargetingMatch",{keyPath:"sessionId"})}})];case 1:return[2,e.sent()]}})})},this.openOrCreateDB=function(t){return(0,x.mG)(e,void 0,void 0,function(){var e,n;return(0,x.Jh)(this,function(r){switch(r.label){case 0:if(this.dbs&&this.dbs[t])return[2,this.dbs[t]];return e="".concat(t.substring(0,10),"_amp_session_replay_targeting"),[4,this.createStore(e)];case 1:return n=r.sent(),this.dbs[t]=n,[2,n]}})})},this.getTargetingMatchForSession=function(t){var n=t.loggerProvider,r=t.apiKey,i=t.sessionId;return(0,x.mG)(e,void 0,void 0,function(){var e,t,o,s;return(0,x.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.openOrCreateDB(r)];case 1:return e=a.sent(),t=String(i),[4,e.get("sessionTargetingMatch",t)];case 2:return[2,null==(o=a.sent())?void 0:o.targetingMatch];case 3:return s=a.sent(),n.warn("Failed to get targeting match for session id ".concat(i,": ").concat(s)),[3,4];case 4:return[2,void 0]}})})},this.storeTargetingMatchForSession=function(t){var n=t.loggerProvider,r=t.apiKey,i=t.sessionId,o=t.targetingMatch;return(0,x.mG)(e,void 0,void 0,function(){var e,t,s;return(0,x.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.openOrCreateDB(r)];case 1:return e=a.sent(),t=String(i),[4,e.put("sessionTargetingMatch",{targetingMatch:o,sessionId:t,lastUpdated:Date.now()})];case 2:return[2,a.sent()];case 3:return s=a.sent(),n.warn("Failed to store targeting match for session id ".concat(i,": ").concat(s)),[3,4];case 4:return[2,void 0]}})})},this.clearStoreOfOldSessions=function(t){var n=t.loggerProvider,r=t.apiKey,i=t.currentSessionId;return(0,x.mG)(e,void 0,void 0,function(){var e,t,o,s,a,c,u,l;return(0,x.Jh)(this,function(d){switch(d.label){case 0:return d.trys.push([0,8,,9]),[4,this.openOrCreateDB(r)];case 1:return e=d.sent(),t=String(i),[4,(o=e.transaction("sessionTargetingMatch","readwrite")).store.getAll()];case 2:s=d.sent(),a=0,d.label=3;case 3:if(!(a<s.length))return[3,6];if(c=s[a],u=Date.now()-c.lastUpdated,!(c.sessionId!==t&&u>1728e5))return[3,5];return[4,o.store.delete(c.sessionId)];case 4:d.sent(),d.label=5;case 5:return a++,[3,3];case 6:return[4,o.done];case 7:return d.sent(),[3,9];case 8:return l=d.sent(),n.warn("Failed to clear old targeting matches for sessions: ".concat(l)),[3,9];case 9:return[2]}})})}},tG=function(e){var t=e.sessionId,r=e.targetingConfig,i=e.loggerProvider,o=e.apiKey,s=e.targetingParams;return(0,x.mG)(void 0,void 0,void 0,function(){var e,a,c;return(0,x.Jh)(this,function(u){switch(u.label){case 0:return[4,tJ.clearStoreOfOldSessions({loggerProvider:i,apiKey:o,currentSessionId:t})];case 1:return u.sent(),[4,tJ.getTargetingMatchForSession({loggerProvider:i,apiKey:o,sessionId:t})];case 2:if(!0===u.sent())return[2,!0];e=!0,u.label=3;case 3:return u.trys.push([3,6,,7]),[4,Promise.all([n.e(596),n.e(1371)]).then(n.bind(n,29870))];case 4:return[4,(0,u.sent().evaluateTargeting)((0,x.pi)((0,x.pi)({},s),{flag:r,sessionId:"string"==typeof t?parseInt(t,10):t,apiKey:o,loggerProvider:i}))];case 5:return(a=u.sent())&&a.sr_targeting_config&&(e="on"===a.sr_targeting_config.key),tJ.storeTargetingMatchForSession({loggerProvider:i,apiKey:o,sessionId:t,targetingMatch:e}),[3,7];case 6:return c=u.sent(),i.warn(c.message),[3,7];case 7:return[2,e]}})})};function tU(e){return void 0===e&&(e={}),{name:"amplitude/url-tracking@1",observer:function(t,n,r){var i,o,s,a=(0,x.pi)((0,x.pi)({},e),r),c=a.ugcFilterRules||[],u=null!==(i=a.enablePolling)&&void 0!==i&&i,l=null!==(o=a.pollingInterval)&&void 0!==o?o:1e3,d=null!==(s=a.captureDocumentTitle)&&void 0!==s&&s;if(!n)return function(){};var f=void 0,h="__amplitude_url_tracking_patched__",v="__amplitude_url_tracking_reset__",g=function(){return n.location&&n.location.href||""},p=function(){var e=n.innerHeight,t=n.innerWidth,r=n.document,i=g(),o="";return d&&(o=(null==r?void 0:r.title)||""),{href:c.length>0?er(i,c):i,title:o,viewportHeight:e,viewportWidth:t,type:"url-change-event"}},m=function(){var e=g();(void 0===f||e!==f)&&(f=e,t(p()))},y=function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(this,t);return n[v]||m(),i};return t[h]=!0,t},b=function(){m()};if(u){var S=n.setInterval(function(){m()},l);return m(),function(){S&&n.clearInterval(S)}}if(n.history){var w=n.history.pushState.bind(n.history),I=n.history.replaceState.bind(n.history);return n.history.pushState[h]||(n.history.pushState=y(w),n.history.replaceState=y(I)),n.addEventListener("popstate",m),n.addEventListener("hashchange",b),m(),function(){n[v]=!0,n.removeEventListener("popstate",m),n.removeEventListener("hashchange",b)}}return n.addEventListener("hashchange",b),m(),function(){n.removeEventListener("hashchange",b)}},options:e}}tU();var tB=function(){function e(){var e=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.eventCount=0,this.sessionTargetingMatch=!1,this.pageLeaveFns=[],this.recordFunction=null,this.teardownEventListeners=function(t){var n=(0,H.l)();n&&(n.removeEventListener("blur",e.blurListener),n.removeEventListener("focus",e.focusListener),t||n.addEventListener("blur",e.blurListener),t||n.addEventListener("focus",e.focusListener),n.self&&"onpagehide"in n.self?(n.removeEventListener("pagehide",e.pageLeaveListener),t||n.addEventListener("pagehide",e.pageLeaveListener)):(n.removeEventListener("beforeunload",e.pageLeaveListener),t||n.addEventListener("beforeunload",e.pageLeaveListener)))},this.blurListener=function(){e.sendEvents()},this.focusListener=function(){e.recordEvents(!1)},this.pageLeaveListener=function(t){e.pageLeaveFns.forEach(function(e){e(t)})},this.evaluateTargetingAndCapture=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),(0,x.mG)(e,void 0,void 0,function(){var e,i;return(0,x.Jh)(this,function(o){switch(o.label){case 0:if(!this.identifiers||!this.identifiers.sessionId||!this.config)return this.identifiers&&!this.identifiers.sessionId?this.loggerProvider.log("Session ID has not been set yet, cannot evaluate targeting for Session Replay."):this.loggerProvider.warn("Session replay init has not been called, cannot evaluate targeting."),[2];if(!this.config.targetingConfig){if(!n)return this.loggerProvider.log("No targeting config set, skipping initialization/recording for event."),[2];this.loggerProvider.log("Targeting config has not been set yet, cannot evaluate targeting.")}if(this.lastTargetingParams=t,!(this.config.targetingConfig&&!this.sessionTargetingMatch))return[3,2];return(e=t.event)&&Object.values(u).includes(e.event_type)&&(e=void 0),i=this,[4,tG({sessionId:this.identifiers.sessionId,targetingConfig:this.config.targetingConfig,loggerProvider:this.loggerProvider,apiKey:this.config.apiKey,targetingParams:{userProperties:t.userProperties,event:e}})];case 1:i.sessionTargetingMatch=o.sent(),this.loggerProvider.debug(JSON.stringify({name:"targeted replay capture config",sessionTargetingMatch:this.sessionTargetingMatch,event:e,targetingParams:t},null,2)),o.label=2;case 2:if(!n)return[3,3];return this.initialize(!0),[3,5];case 3:if(!(r||!this.recordCancelCallback))return[3,5];return this.loggerProvider.log("Recording events for session due to forceRestart or no ongoing recording."),[4,this.recordEvents()];case 4:o.sent(),o.label=5;case 5:return[2]}})})},this.addCustomRRWebEvent=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r=!0),(0,x.mG)(e,void 0,void 0,function(){var e,i,o,s;return(0,x.Jh)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,3,,4]),e=void 0,!((i=this.config)&&t!==a.METADATA)||(e={config:eo(i),version:tc},!r))return[3,2];return[4,ei()];case 1:o=c.sent(),e=(0,x.pi)((0,x.pi)({},o),e),c.label=2;case 2:return this.recordCancelCallback&&this.recordFunction?this.recordFunction.addCustomEvent(t,(0,x.pi)((0,x.pi)({},n),e)):this.loggerProvider.debug("Not able to add custom replay capture event ".concat(t," due to no ongoing recording.")),[3,4];case 3:return s=c.sent(),this.loggerProvider.debug("Error while adding custom replay capture event: ",s),[3,4];case 4:return[2]}})})},this.stopRecordingEvents=function(){var t;try{e.loggerProvider.log("Session Replay capture stopping."),e.recordCancelCallback&&e.recordCancelCallback(),e.recordCancelCallback=null,null===(t=e.networkObservers)||void 0===t||t.stop()}catch(t){e.loggerProvider.warn("Error occurred while stopping replay capture: ".concat(t.toString()))}},this.loggerProvider=new X(new M)}return e.prototype.init=function(e,t){return ec(this._init(e,t))},e.prototype._init=function(e,t){var r,i,o,s,a,c;return(0,x.mG)(this,void 0,void 0,function(){var u,l,d,f,h,v,g,p,m,y,b,S,w,I;return(0,x.Jh)(this,function(C){switch(C.label){case 0:return this.loggerProvider=new X(t.loggerProvider||new M),Object.prototype.hasOwnProperty.call(t,"logLevel")&&this.loggerProvider.enable(t.logLevel),this.identifiers=new tj({sessionId:t.sessionId,deviceId:t.deviceId}),u=this,[4,(0,x.mG)(void 0,void 0,void 0,function(){var n;return(0,x.Jh)(this,function(r){return n=new ea(e,t),[2,new eD(new eO(e,n.loggerProvider,n.serverZone,t.configServerUrl),n)]})})];case 1:return u.joinedConfigGenerator=C.sent(),[4,this.joinedConfigGenerator.generateJoinedConfig()];case 2:d=(l=C.sent()).joinedConfig,f=l.localConfig,h=l.remoteConfig,this.config=d,this.setMetadata(t.sessionId,d,f,h,null===(r=t.version)||void 0===r?void 0:r.version,tc,null===(i=t.version)||void 0===i?void 0:i.type),t.sessionId&&(null===(o=this.config.interactionConfig)||void 0===o?void 0:o.enabled)&&(v=tF.default({sessionId:t.sessionId,type:"interaction"},this.config),this.pageLeaveFns=[v.send(this.getDeviceId.bind(this)).bind(v)],this.scrollHook=v.hook.bind(v),this.clickHandler=new tL(this.loggerProvider,v)),g=[],"idb"!==(p=this.config.storeType)||(null===(s=(0,H.l)())||void 0===s?void 0:s.indexedDB)||(p="memory",this.loggerProvider.warn("Could not use preferred indexedDB storage, reverting to in memory option.")),this.loggerProvider.log("Using ".concat(p," for event storage.")),C.label=3;case 3:return C.trys.push([3,5,,6]),[4,tb({config:this.config,sessionId:this.identifiers.sessionId,type:"replay",storeType:p})];case 4:return m=C.sent(),g.push({name:"replay",manager:m}),[3,6];case 5:return y=C.sent(),this.loggerProvider.warn("Error occurred while creating replay events manager: ".concat(y.toString())),[3,6];case 6:if(!(null===(a=this.config.interactionConfig)||void 0===a?void 0:a.enabled))return[3,10];b=this.config.interactionConfig.batch?tD:tM,C.label=7;case 7:return C.trys.push([7,9,,10]),[4,tb({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:null!==(c=this.config.interactionConfig.trackEveryNms)&&void 0!==c?c:3e4,maxInterval:6e4,payloadBatcher:b,storeType:p})];case 8:return S=C.sent(),g.push({name:"interaction",manager:S}),[3,10];case 9:return y=C.sent(),this.loggerProvider.warn("Error occurred while creating interaction events manager: ".concat(y.toString())),[3,10];case 10:if(this.eventsManager=new(tS.bind.apply(tS,(0,x.ev)([void 0],(0,x.CR)(g),!1))),this.eventCompressor&&this.eventCompressor.terminate(),w=void 0,I=(0,H.l)(),!(this.config.useWebWorker&&I&&I.Worker))return[3,12];return[4,n.e(4853).then(n.bind(n,94853))];case 11:w=C.sent().compressionScript,C.label=12;case 12:return this.eventCompressor=new ts(this.eventsManager,this.config,this.getDeviceId(),w),[4,this.initializeNetworkObservers()];case 13:return C.sent(),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),this.teardownEventListeners(!1),[4,this.evaluateTargetingAndCapture({userProperties:t.userProperties},!0)];case 14:return C.sent(),[2]}})})},e.prototype.setSessionId=function(e,t){return ec(this.asyncSetSessionId(e,t))},e.prototype.asyncSetSessionId=function(e,t,n){var r;return(0,x.mG)(this,void 0,void 0,function(){var i,o,s;return(0,x.Jh)(this,function(a){switch(a.label){case 0:if(this.sessionTargetingMatch=!1,this.lastShouldRecordDecision=void 0,(i=this.identifiers&&this.identifiers.sessionId)&&this.sendEvents(i),o=t||this.getDeviceId(),this.identifiers=new tj({sessionId:e,deviceId:o}),!(this.joinedConfigGenerator&&i))return[3,2];return[4,this.joinedConfigGenerator.generateJoinedConfig()];case 1:s=a.sent().joinedConfig,this.config=s,a.label=2;case 2:if(!(null===(r=this.config)||void 0===r?void 0:r.targetingConfig))return[3,4];return[4,this.evaluateTargetingAndCapture({userProperties:null==n?void 0:n.userProperties},!1,!0)];case 3:return a.sent(),[3,6];case 4:return[4,this.recordEvents()];case 5:a.sent(),a.label=6;case 6:return[2]}})})},e.prototype.getSessionReplayProperties=function(){var e,t=this.config,n=this.identifiers;if(!t||!n)return this.loggerProvider.warn("Session replay init has not been called, cannot get session replay properties."),{};var r=this.getShouldRecord(),i={};return r&&((e={})[U]=n.sessionReplayId?n.sessionReplayId:null,i=e,t.debugMode&&(i[K]=JSON.stringify({appHash:eu(t.apiKey).toString()}))),this.addCustomRRWebEvent(a.GET_SR_PROPS,{shouldRecord:r,eventProperties:i},10===this.eventCount),10===this.eventCount&&(this.eventCount=0),this.eventCount++,i},e.prototype.sendEvents=function(e){var t,n=e||(null===(t=this.identifiers)||void 0===t?void 0:t.sessionId),r=this.getDeviceId();this.eventsManager&&n&&r&&this.eventsManager.sendCurrentSequenceEvents({sessionId:n,deviceId:r})},e.prototype.initialize=function(e){var t;return void 0===e&&(e=!1),(0,x.mG)(this,void 0,void 0,function(){var n;return(0,x.Jh)(this,function(r){return(null===(t=this.identifiers)||void 0===t?void 0:t.sessionId)?(n=this.getDeviceId())?(this.eventsManager&&e&&this.eventsManager.sendStoredEvents({deviceId:n}),[2,this.recordEvents()]):(this.loggerProvider.log("Session is not being recorded due to lack of device id."),[2,Promise.resolve()]):(this.loggerProvider.log("Session is not being recorded due to lack of session id."),[2,Promise.resolve()])})})},e.prototype.shouldOptOut=function(){if(null===(t=this.config)||void 0===t?void 0:t.instanceName){var e,t,n,r;r=(void 0===(e=this.config.instanceName)&&(e=N),eb.getInstance(e)).identityStore.getIdentity().optOut}return void 0!==r?r:null===(n=this.config)||void 0===n?void 0:n.optOut},e.prototype.getShouldRecord=function(){if(!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project or because the remote config could not be fetched.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var e,t,n=!1,r="",i=!1;return this.config.targetingConfig?this.sessionTargetingMatch?(r="Capturing replays for session ".concat(this.identifiers.sessionId," due to matching targeting conditions."),this.loggerProvider.log(r),n=!0,i=!0):(r="Not capturing replays for session ".concat(this.identifiers.sessionId," due to not matching targeting conditions."),this.loggerProvider.log(r),n=!1,i=!1):(e=this.identifiers.sessionId,t=this.config.sampleRate,31*Math.abs(eu(e.toString()))%1e6/1e6<t)?(n=!0,i=!0):(r="Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate."),this.loggerProvider.log(r),n=!1,i=!1),this.lastShouldRecordDecision!==n&&this.config.targetingConfig&&(this.addCustomRRWebEvent(a.TARGETING_DECISION,{message:r,sessionId:this.identifiers.sessionId,matched:i,targetingParams:this.lastTargetingParams}),this.lastShouldRecordDecision=n),n},e.prototype.getBlockSelectors=function(){var e,t,n,r=null!==(n=null===(t=null===(e=this.config)||void 0===e?void 0:e.privacyConfig)||void 0===t?void 0:t.blockSelector)&&void 0!==n?n:[];if(0!==r.length)return r},e.prototype.getMaskTextSelectors=function(){if((null===(t=null===(e=this.config)||void 0===e?void 0:e.privacyConfig)||void 0===t?void 0:t.defaultMaskLevel)==="conservative")return"*";var e,t,n,r,i=null===(r=null===(n=this.config)||void 0===n?void 0:n.privacyConfig)||void 0===r?void 0:r.maskSelector;if(i)return i},e.prototype.getRecordingPlugins=function(e){var t,r,i,o,s,a;return(0,x.mG)(this,void 0,void 0,function(){var c,u,l,d;return(0,x.Jh)(this,function(f){switch(f.label){case 0:c=[];try{u=tU({ugcFilterRules:(null===(r=null===(t=this.config)||void 0===t?void 0:t.interactionConfig)||void 0===r?void 0:r.ugcFilterRules)||[],enablePolling:(null===(i=this.config)||void 0===i?void 0:i.enableUrlChangePolling)||!1,pollingInterval:null===(o=this.config)||void 0===o?void 0:o.urlChangePollingInterval,captureDocumentTitle:null===(s=this.config)||void 0===s?void 0:s.captureDocumentTitle}),c.push(u)}catch(e){this.loggerProvider.warn("Failed to create URL tracking plugin:",e)}if(!(null===(a=null==e?void 0:e.console)||void 0===a?void 0:a.enabled))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all([n.e(6749),n.e(596)]).then(n.bind(n,25093))];case 2:return l=f.sent().getRecordConsolePlugin,c.push(l({level:e.console.levels})),[3,4];case 3:return d=f.sent(),this.loggerProvider.warn("Failed to load console plugin:",d),[3,4];case 4:return[2,c.length>0?c:void 0]}})})},e.prototype.getRecordFunction=function(){return(0,x.mG)(this,void 0,void 0,function(){var e,t;return(0,x.Jh)(this,function(r){switch(r.label){case 0:if(this.recordFunction)return[2,this.recordFunction];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all([n.e(3172),n.e(596)]).then(n.bind(n,97193))];case 2:return e=r.sent().record,this.recordFunction=e,[2,e];case 3:return t=r.sent(),this.loggerProvider.warn("Failed to load rrweb-record module:",t),[2,null];case 4:return[2]}})})},e.prototype.recordEvents=function(e){var t,n,r,i,o,s,c;return void 0===e&&(e=!0),(0,x.mG)(this,void 0,void 0,function(){var u,l,d,f,h,v,g,p,m,y,b,S,w,I=this;return(0,x.Jh)(this,function(C){switch(C.label){case 0:if(u=this.config,l=this.getShouldRecord(),d=null===(t=this.identifiers)||void 0===t?void 0:t.sessionId,!l||!d||!u)return[2];return this.stopRecordingEvents(),[4,this.getRecordFunction()];case 1:if(!(f=C.sent()))return[2];return[4,this.initializeNetworkObservers()];case 2:C.sent(),null===(n=this.networkObservers)||void 0===n||n.start(function(e){I.addCustomRRWebEvent(a.FETCH_REQUEST,e)}),h=u.privacyConfig,v=u.interactionConfig,g=u.loggingConfig,p=(null==v?void 0:v.enabled)?{mouseInteraction:this.eventsManager&&(null===(r=this.clickHandler)||void 0===r?void 0:r.createHook({eventsManager:this.eventsManager,sessionId:d,deviceIdFn:this.getDeviceId.bind(this),mirror:f.mirror,ugcFilterRules:null!==(i=v.ugcFilterRules)&&void 0!==i?i:[],performanceOptions:null===(o=u.performanceConfig)||void 0===o?void 0:o.interaction})),scroll:this.scrollHook}:{},m=(null==v?void 0:v.enabled)&&v.ugcFilterRules?v.ugcFilterRules:[],this.loggerProvider.log("Session Replay capture beginning for ".concat(d,".")),C.label=3;case 3:return C.trys.push([3,5,,6]),y=this,b=f,w={emit:function(e){if(I.shouldOptOut()){I.loggerProvider.log("Opting session ".concat(d," out of recording due to optOut config.")),I.stopRecordingEvents(),I.sendEvents();return}e.type===eS.Meta&&(e.data.href=er(e.data.href,m)),I.eventCompressor&&I.eventCompressor.enqueueEvent(e,d)},inlineStylesheet:u.shouldInlineStylesheet,hooks:p,maskAllInputs:!0,maskTextClass:z,blockClass:"amp-block",blockSelector:this.getBlockSelectors(),applyBackgroundColorToBlockedElements:u.applyBackgroundColorToBlockedElements,maskInputFn:$("input",h),maskTextFn:$("text",h),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,slimDOMOptions:{script:null===(s=u.omitElementTags)||void 0===s?void 0:s.script,comment:null===(c=u.omitElementTags)||void 0===c?void 0:c.comment},errorHandler:function(e){if(e.message.includes("insertRule")&&e.message.includes("CSSStyleSheet")||e._external_)throw e;return I.loggerProvider.warn("Error while capturing replay: ",e.toString()),!0}},[4,this.getRecordingPlugins(g)];case 4:return y.recordCancelCallback=b.apply(void 0,[(w.plugins=C.sent(),w)]),this.addCustomRRWebEvent(a.DEBUG_INFO),e&&this.addCustomRRWebEvent(a.METADATA,this.metadata),[3,6];case 5:return S=C.sent(),this.loggerProvider.warn("Failed to initialize session replay:",S),[3,6];case 6:return[2]}})})},e.prototype.getDeviceId=function(){var e;return null===(e=this.identifiers)||void 0===e?void 0:e.deviceId},e.prototype.getSessionId=function(){var e;return null===(e=this.identifiers)||void 0===e?void 0:e.sessionId},e.prototype.flush=function(e){var t;return void 0===e&&(e=!1),(0,x.mG)(this,void 0,void 0,function(){return(0,x.Jh)(this,function(n){return[2,null===(t=this.eventsManager)||void 0===t?void 0:t.flush(e)]})})},e.prototype.shutdown=function(){this.teardownEventListeners(!0),this.stopRecordingEvents(),this.sendEvents()},e.prototype.mapSDKType=function(e){return"plugin"===e?"@amplitude/plugin-session-replay-browser":"segment"===e?"@amplitude/segment-session-replay-plugin":null},e.prototype.setMetadata=function(e,t,n,r,i,o,s){var a=(null==e?void 0:e.toString())?eu(e.toString()):void 0;this.metadata={joinedConfig:t,localConfig:n,remoteConfig:r,sessionId:e,hashValue:a,sampleRate:t.sampleRate,replaySDKType:this.mapSDKType(s),replaySDKVersion:i,standaloneSDKType:"@amplitude/session-replay-browser",standaloneSDKVersion:o}},e.prototype.initializeNetworkObservers=function(){var e,t,r;return(0,x.mG)(this,void 0,void 0,function(){var i,o;return(0,x.Jh)(this,function(s){switch(s.label){case 0:if(!((null===(r=null===(t=null===(e=this.config)||void 0===e?void 0:e.loggingConfig)||void 0===t?void 0:t.network)||void 0===r?void 0:r.enabled)&&!this.networkObservers))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.e(5829).then(n.bind(n,95829))];case 2:return i=s.sent().NetworkObservers,this.networkObservers=new i,[3,4];case 3:return o=s.sent(),this.loggerProvider.warn("Failed to import or instantiate NetworkObservers:",o),[3,4];case 4:return[2]}})})},e}(),tW=function(e){return function(){var t=e.config||es();return{logger:t.loggerProvider,logLevel:t.logLevel}}},tK={init:_((T=new tB).init.bind(T),"init",tW(T)),evaluateTargetingAndCapture:_(T.evaluateTargetingAndCapture.bind(T),"evaluateTargetingAndRecord",tW(T)),setSessionId:_(T.setSessionId.bind(T),"setSessionId",tW(T)),getSessionId:_(T.getSessionId.bind(T),"getSessionId",tW(T)),getSessionReplayProperties:_(T.getSessionReplayProperties.bind(T),"getSessionReplayProperties",tW(T)),flush:_(T.flush.bind(T),"flush",tW(T)),shutdown:_(T.shutdown.bind(T),"shutdown",tW(T))},tz=tK.init,tX=tK.setSessionId,tH=tK.getSessionId,tQ=tK.getSessionReplayProperties,tV=tK.flush,tZ=tK.shutdown,t$=tK.evaluateTargetingAndCapture},53673:function(e,t,n){let r,i,o,s;n.d(t,{X3:function(){return v}});let a=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,u=new WeakMap,l=new WeakMap,d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(f(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return l.set(t,e),t}(e);if(u.has(e))return u.get(e);let n="function"==typeof(t=e)?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(h(this),e),f(this.request)}:function(...e){return f(t.apply(h(this),e))}:(t instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});c.set(e,t)}(t),a(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,d):t;return n!==e&&(u.set(e,n),l.set(n,e)),n}let h=e=>l.get(e);function v(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=f(s);return r&&s.addEventListener("upgradeneeded",e=>{r(f(s.result),e.oldVersion,e.newVersion,f(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}let g=["get","getKey","getAll","getAllKeys","count"],p=["put","add","delete","clear"],m=new Map;function y(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(m.get(t))return m.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=p.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||g.includes(n)))return;let o=async function(e,...t){let o=this.transaction(e,i?"readwrite":"readonly"),s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&o.done]))[0]};return m.set(t,o),o}d={...o=d,get:(e,t,n)=>y(e,t)||o.get(e,t,n),has:(e,t)=>!!y(e,t)||o.has(e,t)};let b=["continue","continuePrimaryKey","advance"],S={},w=new WeakMap,I=new WeakMap,C={get(e,t){if(!b.includes(t))return e[t];let n=S[t];return n||(n=S[t]=function(...e){w.set(this,I.get(this)[t](...e))}),n}};async function*E(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,C);for(I.set(n,t),l.set(n,h(t));t;)yield n,t=await (w.get(n)||t.continue()),w.delete(n)}function P(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}d={...s=d,get:(e,t,n)=>P(e,t)?E:s.get(e,t,n),has:(e,t)=>P(e,t)||s.has(e,t)}},47750:function(e,t,n){n.d(t,{CR:function(){return l},Jh:function(){return c},XA:function(){return u},ZT:function(){return i},_T:function(){return s},ev:function(){return d},mG:function(){return a},pi:function(){return o}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function c(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError}}]);
//# sourceMappingURL=7686-0625167b8fdbe444.js.map